<button id="addNewObserver">Add New Observer checkbox</button>
<input id="mainCheckbox" type="checkbox"/>
<div id="observersContainer"></div>
<script src="observer-pattern.js"></script>
<script>

function extend(extension, obj) {
  for(var key in extension) {
    obj[key] = extension[key];
  }
}

var controlCheckbox = document.getElementById("mainCheckbox");
var addBtn = document.getElementById("addNewObserver");
var container = document.getElementById("observersContainer");

extend(new Subject(), controlCheckbox);

controlCheckbox.onclick = function() {
  controlCheckbox.notify(controlCheckbox.checked);
};

addBtn.onclick = addNewObserver;

function addNewObserver() {
  var check = document.createElement("input");
  check.type = "checkbox";
  extend(new Observer(), check);
  check.update = function(value) {
    this.checked = value;
  };
  controlCheckbox.addObserver(check);
  container.appendChild(check);
}

</script>
